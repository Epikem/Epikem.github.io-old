{"data":{"markdownRemark":{"html":"<p>오늘 휴일이라 3문제정도 풀긴 했지만 전부 쉬운문제다. 가끔 사다리 조작같이 정말 짜증나고 막히게 하는 문제들이 문제다.\n그래도 오늘 푼 아파트 문제의 경우 예전 처음 감도 없을때였으면 여러 번 틀렸을 텐데, 적어도 지금은 문제 범위나 특성을 보고 아는 범위라면 이게 어떻게 해야겠다 하는 생각이 들고, 그렇게 하니까 풀리긴 한다.\n아예 감이 없었으면 그냥 dir에 따라 이동하게 했다가 진동해서 실패하거나 했을 것이다. 진짜 진짜 작은 것이긴 하지만.. 하나라도 배웠다는 게 중요한 것이다.</p>\n<p>그나저나, sport 로그를 여기랑 통합해야할까? sport에서 풀면서 배운걸 TIL에 적을 공간이 필요하다(그냥 푼 문제 기록/문제에서 배운 원리 등 기록으로 구별)\n통합하려면:</p>\n<p>그리고 지금 processor에서 meta내용이 TIL에 들어가게 되어있는데, 잘못됐다. TIL은 뭔가 새로 알게 되거나 배운 것을 적어야 한다.</p>\n<p>processor에서 고칠 것:</p>\n<ul>\n<li>sport 각 풀이에 대한 것은 블로그에도 중복되어도 상관없음.</li>\n<li>블로그에 풀이 코드도 올려도 상관없을듯</li>\n<li>TIL에는 문제에서 특별히 배운것이 있을 때 적을것.</li>\n<li>sport 태그 필요.</li>\n<li>meta 포스트가 TIL에 들어가는것 수정.</li>\n</ul>\n<p>어쩌다 2일자 포스트 내용이 사라졌다. 이런..</p>\n<h2 id=\"tags\"><a href=\"#tags\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>tags</h2>\n<p>  #meta, #sport</p>","fields":{"slug":"sport-통합해야하나"},"frontmatter":{"title":"sport 통합해야하나","date":"07.05.2019","category":"meta","tags":["meta"],"banner":"/assets/bg/4.jpg"},"timeToRead":1}},"pageContext":{"slug":"sport-통합해야하나","prev":{"excerpt":"vocabo 아직도 쿠버네티스 통신으로 씨름중 대체 개념만 알려주고 어떻게 하는건지 예시를 봐도 그냥 http url로 하는 request가 아니라 무슨 nginx 설정같은게 나오고 그래서 계속 헤매고 있다. cluster ip가 클러스터 내에서만 가능한거고, pod가 각각 ip를 갖고있지만, 로드밸런서나 서비스 없이는 클러스터 밖과 통신 안되는거는 질리도록 알겠는데 그래서 클라이언트에서 url…","html":"<h3 id=\"vocabo-아직도-쿠버네티스-통신으로-씨름중\"><a href=\"#vocabo-%EC%95%84%EC%A7%81%EB%8F%84-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%86%B5%EC%8B%A0%EC%9C%BC%EB%A1%9C-%EC%94%A8%EB%A6%84%EC%A4%91\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vocabo 아직도 쿠버네티스 통신으로 씨름중</h3>\n<p>대체 개념만 알려주고 어떻게 하는건지 예시를 봐도 그냥 http url로 하는 request가 아니라 무슨 nginx 설정같은게 나오고 그래서 계속 헤매고 있다.</p>\n<p>cluster ip가 클러스터 내에서만 가능한거고, pod가 각각 ip를 갖고있지만, 로드밸런서나 서비스 없이는 클러스터 밖과 통신 안되는거는 질리도록 알겠는데 그래서 클라이언트에서 url을 어떻게 해야 서버로 통신이 들어가느냐는 거다..</p>\n<p>겨우 서비스 이름 등에 따라 환경변수가 채워진다는 걸 보고 그대로 따라했는데 여전히 안 된다. 결국 로드밸런서 추가해서 해당 포드에 접근하는거만 되고 포드간 통신을 성공을 못 하고 있다. 환경변수 설명대로 </p>\n<blockquote>\n<p>📂 <code class=\"language-text\">server.js</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">    <span class=\"token keyword\">var</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">elasticsearch<span class=\"token punctuation\">.</span>Client</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// host: process.env.ELASTICSEARCH_URL,</span>\n        host<span class=\"token punctuation\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">ELASTIC_PORT</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// log: 'trace'</span>\n        apiVersion<span class=\"token punctuation\">:</span> <span class=\"token string\">'6.6'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>📂 <code class=\"language-text\">client.js</code></p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> server_url <span class=\"token operator\">=</span> <span class=\"token string\">'http://SERVER_HOST/...'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이런 식으로 하면 ELASTIC_PORT 환경 변수가 채워져서 통신되지 않을까 했지만 여전히 실패했다.</p>\n<p>내가 생각하는 방식은 클라이언트만 로드밸런서를 넣어서 외부에서 접근가능하게 하고, 나머지 서버와 elastic 포드는 cluster ip만으로 통신하게 하는건데, 이게 왜 이렇게 어렵지? </p>\n<p>게다가 찾아보니 docker image 업데이트할 때, 쿠버네티스 자체 yaml 설정으로는 latest이미지에 푸쉬하는걸 감지하여 포드 업데이트하는게 지원되지 않는 모양이다.\n그래서 나는 도커 이미지를 업데이트할 때마다 콘솔에서 latest 태그를 떼었다 붙였다 하면서 수동으로 업데이트하고있다.. </p>\n<p>kube-dns라는것도 있는 모양이고 아무래도 이걸 써야하나 싶긴 한데..</p>\n<h2 id=\"tags\"><a href=\"#tags\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>tags</h2>\n<p>  #vocabo, #kubernetes</p>","id":"2638c380-7b9e-5dab-833a-16b956dbc215","fields":{"slug":"2019-04-26"},"frontmatter":{"date":"2019-04-26","title":"2019-04-26","category":"blog","tags":["blog"],"banner":"/assets/bg/3.jpg"},"timeToRead":1},"next":{"excerpt":"vocabo 아직도 쿠버네티스 통신으로 씨름중 4 skaffold라는 유틸?을 찾았는데, 상당히 유용한데다 편하다! microservice예제를 보니 이해가 좀 된다. 드디어 할 수 있을 거 같다. 내일 분석해서 해보자. tags    # vocabo","html":"<h3 id=\"vocabo-아직도-쿠버네티스-통신으로-씨름중-4\"><a href=\"#vocabo-%EC%95%84%EC%A7%81%EB%8F%84-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-%ED%86%B5%EC%8B%A0%EC%9C%BC%EB%A1%9C-%EC%94%A8%EB%A6%84%EC%A4%91-4\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>vocabo 아직도 쿠버네티스 통신으로 씨름중 4</h3>\n<p>skaffold라는 유틸?을 찾았는데, 상당히 유용한데다 편하다! microservice예제를 보니 이해가 좀 된다. 드디어 할 수 있을 거 같다. 내일 분석해서 해보자.</p>\n<h2 id=\"tags\"><a href=\"#tags\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>tags</h2>\n<p>  #vocabo</p>","id":"5df5b615-8bb5-5895-a5f5-ba0933243f85","fields":{"slug":"2019-05-07"},"frontmatter":{"date":"2019-05-07","title":"2019-05-07","category":"blog","tags":["blog"],"banner":"/assets/bg/3.jpg"},"timeToRead":1}}}